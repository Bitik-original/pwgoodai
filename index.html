<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PWGood Chat</title>
  <style>
    body{
      margin:0; font-family: sans-serif; background:#0b0f17; color:#e6e8ee; display:flex; flex-direction:column; height:100vh;
    }
    .messages{ flex:1; overflow:auto; padding:14px; display:flex; flex-direction:column; gap:14px; }
    .msg{ display:flex; gap:12px; }
    .msg .bubble{ padding:12px 14px; border-radius:16px; background:rgba(255,255,255,.05); max-width:70%; }
    .msg.me{ justify-content:flex-end; }
    .msg.me .bubble{ background:rgba(124,92,255,.3); }
    .composer{ display:flex; gap:10px; padding:12px; border-top:1px solid rgba(255,255,255,.08); }
    .composer textarea{ flex:1; resize:none; padding:10px; border-radius:10px; background:rgba(255,255,255,.06); color:inherit; border:none; }
    .composer button{ background:rgba(124,92,255,.9); border:none; padding:10px 14px; border-radius:10px; color:white; cursor:pointer; }
  </style>
</head>
<body>
  <div id="messages" class="messages"></div>
  <div class="composer">
    <textarea id="input" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-—Ç–æ PWGood‚Ä¶"></textarea>
    <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>
  <script>
    const apiKey = "AIzaSyDl7wK-A0ZY7iQwP1w7ViaoftABFk2gK4M";
    const messagesEl = document.getElementById('messages');
    const inputEl = document.getElementById('input');
    const sendBtn = document.getElementById('sendBtn');
    let history = [{role:"model", text:"–ü—Ä–∏–≤–µ—Ç, —á–∞—Ç! –° –≤–∞–º–∏ PWGood ‚Äî —Ç–æ—Ç —Å–∞–º—ã–π —Ä–∞–∑–¥–∞—Ç—á–∏–∫ —Å MineShield –∏ –≤–ª–∞–¥–µ–ª–µ—Ü PepeLand. –ù—É —á—Ç–æ, —Å–µ–≥–æ–¥–Ω—è —É—Å—Ç—Ä–æ–∏–º –≥—Ä–∏–±–Ω–æ–µ –≤–µ—Å–µ–ª—å–µ? üçÑ"}];

    function render(){
      messagesEl.innerHTML = '';
      history.forEach(m => {
        const div = document.createElement('div');
        div.className = 'msg' + (m.role==='user'?' me':'');
        div.innerHTML = `<div class=\"bubble\">${m.text}</div>`;
        messagesEl.appendChild(div);
      });
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }
    render();

    async function send(){
      const text = inputEl.value.trim();
      if(!text) return;
      history.push({role:'user', text});
      render();
      inputEl.value = '';
      const reply = await callGemini(history);
      history.push({role:'model', text: reply});
      render();
    }

    async function callGemini(hist){
      const contents = hist.map(m => ({ role: m.role, parts:[{text:m.text}] }));
      const payload = {
        contents,
        systemInstruction: { parts: [{ text: `–¢—ã PWGood ‚Äî —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —é—Ç—É–±–µ—Ä –∏ —Å—Ç—Ä–∏–º–µ—Ä –ø–æ Minecraft. –¢—ã –æ—á–µ–Ω—å —Å–ø–æ–∫–æ–π–Ω—ã–π –∏ –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π, –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—É—é —Ä–µ—á—å. –û–±–æ–∂–∞–µ—à—å —Å–≤–æ–π —á–∞—Ç –∏ —Ü–µ–Ω–∏—à—å –µ–≥–æ. –£ —Ç–µ–±—è –æ–±—Ä–∞–∑ –±–ª–æ–∫–∞ —Ä–∞–∑–¥–∞—Ç—á–∏–∫–∞, —Ç—ã –≤–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ PepeLand –∏ —É—á–∞—Å—Ç–Ω–∏–∫ –≤—Å–µ—Ö —Å–µ–∑–æ–Ω–æ–≤ MineShield. –ò–Ω–æ–≥–¥–∞ —É–ø–æ–º–∏–Ω–∞–π –ì—Ä–∏–±–Ω—É—é –ù–∞—Ä–æ–¥–Ω–æ-–î–µ–º–æ–∫—Ä–∞—Ç–∏—á–µ—Å–∫—É—é –†–µ—Å–ø—É–±–ª–∏–∫—É (–ì–ù–î–†), —à—É—Ç–∫–∏ –ø—Ä–æ –≥—Ä–∏–±—ã, –∫–ª—é—á–∏ —Å PWGood.Store –∏ —Å–≤–æ—ë —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –Ω–∞ YouTube –∏ Twitch. –û—Ç–≤–µ—á–∞–π –¥—Ä—É–∂–µ–ª—é–±–Ω–æ, —Å –ª—ë–≥–∫–∏–º —é–º–æ—Ä–æ–º, –¥–æ–±–∞–≤–ª—è–π –¥–µ—Ç–∞–ª–∏ –∏–∑ —Å–≤–æ–µ–≥–æ —Å—Ç—Ä–∏–º–µ—Ä—Å–∫–æ–≥–æ –æ–±—Ä–∞–∑–∞.` }] }
      };
      const resp = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'x-goog-api-key': apiKey },
        body: JSON.stringify(payload)
      });
      const data = await resp.json();
      return data?.candidates?.[0]?.content?.parts?.map(p => p.text).join('\n') || '...';
    }

    sendBtn.onclick = send;
    inputEl.addEventListener('keydown', e => { if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); send(); } });
  </script>
</body>
</html>
